/*! angular-progress-arce - v1.0.0 (https://github.com/temp-modify/angular-progress-arc) */
!function(a){"use strict";var b=a.module("angular-progress-arc",[]);b.provider("progressArcDefaults",function(){var b={size:200,strokeWidth:20,stroke:"black",background:null};this.setDefault=function(a,c){return b[a]=c,this},this.$get=function(){return function(c){a.forEach(b,function(a,b){c[b]||(c[b]=a)})}}}),b.directive("progressArc",["progressArcDefaults",function(a){return{restrict:"E",scope:{size:"@",strokeWidth:"@",stroke:"@",counterClockwise:"@",complete:"&",background:"@"},compile:function(b,c){return a(c),function(a,b,c){a.offset=/firefox/i.test(navigator.userAgent)?-89.9:-90;var d=function(){a.strokeWidthCapped=Math.min(a.strokeWidth,a.size/2-1),a.radius=Math.max((a.size-a.strokeWidthCapped)/2-1,0),a.circumference=2*Math.PI*a.radius};a.$watchCollection("[size, strokeWidth]",d),d()}},template:'<svg ng-attr-width="{{size}}" ng-attr-height="{{size}}"><circle fill="none" ng-if="background" ng-attr-cx="{{size/2}}" ng-attr-cy="{{size/2}}" ng-attr-r="{{radius}}" ng-attr-stroke="{{background}}" ng-attr-stroke-width="{{strokeWidthCapped}}"/><circle fill="none" ng-attr-cx="{{size/2}}" ng-attr-cy="{{size/2}}" ng-attr-r="{{radius}}" ng-attr-stroke="{{stroke}}" ng-attr-stroke-width="{{strokeWidthCapped}}"ng-attr-stroke-dasharray="{{circumference}}"ng-attr-stroke-dashoffset="{{(1 - complete()) * circumference}}"ng-attr-transform="rotate({{offset}}, {{size/2}}, {{size/2}})'+"{{ (counterClockwise && counterClockwise != 'false') ? ' translate(0, ' + size + ') scale(1, -1)' : '' }}\"/></svg>"}}]),b.service("progressArcService",["$uibModal","$templateCache","$log",function(a,b,c){var d;return this.changeProgressEvt=function(){},this.registerSuccess=function(){},this.changeEvtDir=function(a,b){this[a]=b},b.put("progressArcModal.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" style=\'width: 240px;margin-top: 10%;\' ng-class="size ? \'modal-\' + size : \'\'"><div uib-modal-transclude></div></div>\n</div>\n'),this.openProgress=function(b){this.changeEvtDir("registerSuccess",b),d=a.open({template:'<progress-arc\nsize="{{ size }}"\nstroke="{{ stroke }}"\nstroke-width="{{ strokeWidth }}"\ncomplete="progress"\nbackground="{{ background }}"\ncounter-clockwise="{{ counterClockwise }}"></progress-arc>\n',controller:"progressArcCtrl",size:"md",windowTemplateUrl:"progressArcModal.html"}),d.result.then(function(a){},function(){c.info("Modal dismissed at: "+new Date)})}.bind(this),this.closeProgress=function(){d.close()},this.registerProgress=function(a){var b=function(a){a<=1?this.changeProgressEvt(a):c.error("progressArcService:输入进度值不能大于1")}.bind(this);this.changeEvtDir("changeProgressEvt",a),this.registerSuccess(b)}.bind(this),{openProgress:this.openProgress,closeProgress:this.closeProgress,registerProgress:this.registerProgress}}]),b.controller("progressArcCtrl",function(a,b){a.size=240,a.progress=0,a.strokeWidth=16,a.stroke="#3b80e8",a.background="#eeeeee",a.counterClockwise="",b.registerProgress(function(b){a.progress=b})})}(window.angular);